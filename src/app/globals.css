@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: "Hiragino Kaku Gothic ProN", "Hiragino Sans", "BIZ UDPGothic", "Meiryo", sans-serif;
}

/* 通常表示専用のスタイル */
.screen-only {
  display: block;
}

.print-only {
  display: none;
}

/* 印刷時専用の縦書きスタイル */
@media print {
  /* 通常表示を非表示、印刷専用を表示 */
  .screen-only {
    display: none;
  }

  .print-only {
    display: grid;
  }

  /* 基本レイアウトを縦書きに */
  body {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    font-size: 14pt;
    line-height: 1.6;
    margin: 0;
    padding: 20pt;
  }

  /* メインコンテナ */
  main {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    height: 100vh;
    width: 100%;
    overflow: visible;
  }

  /* ヘッダーの縦書き調整 */
  header {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    margin-bottom: 30pt;
  }

  header h1 {
    writing-mode: vertical-rl;
    text-orientation: upright;
    font-size: 24pt;
    margin-bottom: 20pt;
  }

  /* 漢字表示の縦書き調整 */
  .kanji-character {
    writing-mode: vertical-rl;
    text-orientation: upright;
    font-feature-settings: "vert" 1;
  }

  /* グリッドレイアウトの縦書き調整 */
  .grid {
    writing-mode: vertical-rl;
    text-orientation: upright;
    display: block;
  }

  /* カード要素の調整 */
  .kanji-card {
    writing-mode: vertical-rl;
    text-orientation: upright;
    break-inside: avoid;
    margin-bottom: 15pt;
    padding: 4pt;
    border: 1pt solid #333;
    display: inline-block;
    width: 80pt;
    height: 80pt;
    background: white !important;
  }

  /* 2x2グリッド内の各セクション */
  .kanji-card .print-only {
    writing-mode: horizontal-tb !important;
    text-orientation: mixed !important;
    display: grid !important;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: 2pt;
    height: 100%;
    width: 100%;
  }

  /* グリッド内のセルの配置を明示的に指定 */
  .kanji-card .print-only > div:nth-child(1) {
    grid-column: 1; grid-row: 1; /* 左上 */
  }
  .kanji-card .print-only > div:nth-child(2) {
    grid-column: 2; grid-row: 1; /* 右上 */
  }
  .kanji-card .print-only > div:nth-child(3) {
    grid-column: 1; grid-row: 2; /* 左下 */
  }
  .kanji-card .print-only > div:nth-child(4) {
    grid-column: 2; grid-row: 2; /* 右下 */
  }

  /* なぞり書き用の薄いグレー文字 */
  .kanji-card .text-gray-300 {
    color: #ddd !important;
    font-weight: 200;
    writing-mode: vertical-rl !important;
    text-orientation: upright !important;
  }

  /* 練習用セクションの枠線 */
  .kanji-card .border {
    border: 0.5pt solid #666 !important;
    position: relative;
  }

  /* 各マスに破線の十字ガイドライン（字のバランス用） */
  .kanji-card .border::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    right: 0;
    bottom: 0;
    border-left: 0.3pt dashed #ccc;
    pointer-events: none;
  }

  .kanji-card .border::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    bottom: 0;
    border-top: 0.3pt dashed #ccc;
    pointer-events: none;
  }

  /* 背景色の調整 */
  .kanji-card .bg-gray-50 {
    background-color: #f9fafb !important;
  }

  /* 漢字文字のサイズ調整 */
  .kanji-card .kanji-character {
    font-size: 26pt;
    font-feature-settings: "vert" 1;
    line-height: 1;
  }

  /* 部首選択エリアは印刷時は非表示 */
  .radical-selector {
    display: none;
  }

  /* 不要な要素を印刷時に非表示 */
  .no-print {
    display: none;
  }

  /* 背景色やボックスシャドウを印刷時に削除 */
  * {
    background: transparent !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* 改ページ制御 */
  .print-break-before {
    page-break-before: always;
  }

  .print-break-after {
    page-break-after: always;
  }

  .print-break-inside-avoid {
    page-break-inside: avoid;
  }
}

/* 書き順番号オーバーレイ用のスタイル */
.stroke-order-overlay {
  pointer-events: none;
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
}

.stroke-order-overlay svg {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  pointer-events: none !important;
}

/* 書き順番号の調整（囲みなし黒文字） */
.stroke-order-overlay text {
  font-size: 7pt !important;
  fill: #333 !important;
  stroke: white !important;
  stroke-width: 1.5pt !important;
  font-weight: bold !important;
  font-family: Arial, sans-serif !important;
  paint-order: stroke fill !important;
}

/* 書き順表示用のスタイル（従来のものを更新） */
.stroke-order-display {
  writing-mode: horizontal-tb !important;
  text-orientation: mixed !important;
}

.stroke-order-display svg {
  width: 100% !important;
  height: 100% !important;
  max-width: none !important;
  max-height: none !important;
}

.stroke-order-display text {
  font-size: 8pt !important;
  fill: #333 !important;
  stroke: white !important;
  stroke-width: 1.5pt !important;
  font-weight: bold !important;
  font-family: Arial, sans-serif !important;
  paint-order: stroke fill !important;
}

/* ストロークの線 */
.stroke-order-display path {
  stroke: #ccc !important;
  stroke-width: 1.5pt !important;
  fill: none !important;
}

/* なぞり書き用の薄いグレー文字 */
.kanji-card .text-gray-300 {
  color: #ddd !important;
  font-weight: 200;
  writing-mode: vertical-rl !important;
  text-orientation: upright !important;
}
